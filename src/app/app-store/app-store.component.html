<div class="app-store-container">
  <!-- Header -->
  <div class="app-store-header">
    <h2 class="store-title">
      <span class="emoji">🏪</span>
      {{ t("appStore") }}
    </h2>
    <p class="store-subtitle">{{ t("appStoreSubtitle") }}</p>

    <button class="refresh-btn" (click)="refresh()" [disabled]="isLoading">
      <span class="emoji">{{ isLoading ? "⏳" : "🔄" }}</span>
      {{ t("refresh") }}
    </button>
  </div>

  <!-- Error message -->
  <div class="error-message" *ngIf="error">
    <span class="emoji">❌</span>
    {{ error }}
    <button class="retry-btn" (click)="refresh()">{{ t("tryAgain") }}</button>
  </div>

  <!-- Loading state -->
  <div class="loading-state" *ngIf="isLoading && projects.length === 0">
    <span class="emoji">⏳</span>
    <p>{{ t("loadingAmazingApps") }}</p>
  </div>

  <!-- Projects grid -->
  <div class="projects-grid" *ngIf="!isLoading || projects.length > 0">
    <div
      class="project-card"
      *ngFor="let project of projects; trackBy: trackByProjectId"
    >
      <div class="project-header">
        <h3 class="project-name">{{ project.name }}</h3>
        <span
          class="language-badge"
          [class]="'lang-' + project.language.toLowerCase()"
        >
          {{ project.language }}
        </span>
      </div>

      <div class="project-meta">
        <div class="creator-info">
          <span class="emoji">👤</span>
          <span class="creator-name">{{
            project.user.name || project.user.username
          }}</span>
        </div>

        <div class="publish-date">
          <span class="emoji">📅</span>
          <span>{{ project.updatedAt | date : "short" }}</span>
        </div>

        <div class="star-info" *ngIf="project.starCount !== undefined">
          <span class="emoji">⭐</span>
          <span>{{ project.starCount || 0 }}</span>
        </div>
      </div>

      <div class="project-actions">
        <button class="try-btn" (click)="onTryProject(project)">
          <span class="emoji">▶️</span>
          {{ t("tryIt") }}
        </button>

        <button
          class="star-btn"
          [class.starred]="project.starred"
          (click)="onStarProject(project)"
          [title]="project.starred ? t('removeStar') : t('starThisApp')"
        >
          <span class="emoji">{{ project.starred ? "⭐" : "☆" }}</span>
          {{ project.starred ? t("starred") : t("star") }}
        </button>
      </div>
    </div>

    <!-- Empty state -->
    <div class="empty-state" *ngIf="projects.length === 0 && !isLoading">
      <span class="emoji">📱</span>
      <h3>{{ t("noAppsPublished") }}</h3>
      <p>{{ t("beTheFirst") }}</p>
    </div>
  </div>

  <!-- Load more button -->
  <div class="load-more-container" *ngIf="hasMore && projects.length > 0">
    <button
      class="load-more-btn"
      (click)="loadMore()"
      [disabled]="isLoadingMore"
    >
      <span class="emoji">{{ isLoadingMore ? "⏳" : "⬇️" }}</span>
      {{ isLoadingMore ? t("loading") : t("loadMore") }}
    </button>
  </div>

  <!-- Stats footer -->
  <div class="stats-footer" *ngIf="total > 0">
    <p>
      {{ t("showingApps").replace("{{count}}",
      projects.length.toString()).replace("{{ total }}", total.toString()) }}
    </p>
  </div>
</div>
