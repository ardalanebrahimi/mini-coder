<!-- Input Section -->
<div class="input-section">
  <div class="input-container">
    <div class="input-header">
      <h2>{{ t("tellMeWhat") }}</h2>
      <div class="header-actions">
        <button
          *ngIf="false"
          class="example-btn"
          (click)="onTestStaticPreview()"
          style="background: #9c27b0"
        >
          <span class="emoji">ðŸ”§</span>
          Test Preview
        </button>
        <button
          *ngIf="false"
          class="example-btn"
          (click)="onTestBlobUrl()"
          style="background: #ff9800"
        >
          <span class="emoji">ðŸ”—</span>
          Test Blob URL
        </button>
        <button
          class="voice-btn"
          (click)="onStartVoiceInput()"
          [disabled]="!state.voiceSupported || state.isListening"
          [class.listening]="state.isListening"
          *ngIf="state.voiceSupported"
        >
          <span class="emoji" *ngIf="!state.isListening">ðŸŽ¤</span>
          <span class="pulse" *ngIf="state.isListening">ðŸ”´</span>
          {{ state.isListening ? t("listening") : t("voiceInput") }}
        </button>
      </div>
    </div>

    <!-- App Idea Suggestions -->
    <div class="suggestions-section" *ngIf="showSuggestions">
      <div class="suggestions-header">
        <h3 class="suggestions-title">
          <span class="emoji">ðŸ’¡</span>
          Need app ideas?
          <span class="suggestion-count" *ngIf="suggestionsCollapsed"
            >(3 suggestions)</span
          >
        </h3>
        <div class="suggestions-controls">
          <button
            class="toggle-btn"
            (click)="toggleSuggestions()"
            [title]="
              suggestionsCollapsed
                ? 'Expand suggestions'
                : 'Collapse suggestions'
            "
          >
            <span class="emoji">{{ suggestionsCollapsed ? "â–¼" : "â–²" }}</span>
          </button>
          <button
            class="refresh-btn"
            (click)="onRefreshSuggestions()"
            title="Get new suggestions"
            *ngIf="!suggestionsCollapsed"
          >
            <span class="emoji">ðŸ”„</span>
          </button>
          <button
            class="close-btn"
            (click)="hideSuggestions()"
            title="Hide suggestions"
          >
            <span class="emoji">âœ•</span>
          </button>
        </div>
      </div>
      <div class="suggestions-list" *ngIf="!suggestionsCollapsed">
        <button
          *ngFor="let suggestion of currentSuggestions"
          class="suggestion-item"
          (click)="onSuggestionClick(suggestion)"
        >
          {{ suggestion }}
        </button>
      </div>
    </div>

    <!-- Show suggestions button when hidden -->
    <div class="show-suggestions-section" *ngIf="!showSuggestions">
      <button class="show-suggestions-btn" (click)="toggleSuggestions()">
        <span class="emoji">ðŸ’¡</span>
        Show app ideas
      </button>
    </div>

    <div class="input-wrapper">
      <div class="input-with-voice">
        <textarea
          [ngModel]="state.userCommand"
          (ngModelChange)="onUserCommandChange($event)"
          [placeholder]="t('placeholderText')"
          class="command-input"
          rows="3"
          [disabled]="state.isProcessing"
        ></textarea>
      </div>

      <button
        class="run-btn"
        (click)="onProcessCommand()"
        [disabled]="state.isProcessing || !state.userCommand.trim()"
      >
        <span class="emoji" *ngIf="!state.isProcessing">ðŸ”¥</span>
        <span class="spinner" *ngIf="state.isProcessing"></span>
        {{ state.isProcessing ? t("creating") : t("createApp") }}
      </button>
    </div>
  </div>
</div>
