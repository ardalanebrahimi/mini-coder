<!-- Save/Publish Dialog -->
<div class="modal-overlay" *ngIf="showDialog" (click)="onOverlayClick()">
  <div class="modal-content" (click)="onContentClick($event)">
    <h3>
      <span class="emoji">🏪</span>
      Add to App Store
    </h3>

    <div class="modal-body">
      <label for="projectName">{{ t("projectName") }}</label>
      <input
        id="projectName"
        [(ngModel)]="projectName"
        type="text"
        class="project-name-input"
        placeholder="Enter project name"
        maxlength="50"
        (keyup.enter)="onEnterKey()"
      />

      <!-- Error message -->
      <div class="error-message" *ngIf="errorMessage">
        <span class="emoji">❌</span>
        {{ errorMessage }}
      </div>

      <div class="modal-info" *ngIf="dialogData">
        <p>
          <strong>{{ t("command") }}:</strong> {{ dialogData.userCommand }}
        </p>
        <p>
          <strong>{{ t("language") }}:</strong>
          {{
            dialogData.currentApp.detectedLanguage === "de"
              ? "German"
              : "English"
          }}
        </p>
      </div>

      <!-- Success message for published apps -->
      <div class="success-message" *ngIf="publishSuccessMessage">
        <span class="emoji">🎉</span>
        {{ publishSuccessMessage }}
      </div>
    </div>

    <div class="modal-actions">
      <button class="btn-secondary" (click)="cancelSave()">
        {{ t("cancel") }}
      </button>

      <!-- Add to App Store Button (only button in dialog now) -->
      <button
        class="btn-appstore"
        (click)="addToAppStore()"
        [disabled]="!projectName.trim() || isPublishing"
      >
        <span class="emoji" *ngIf="!isPublishing">🏪</span>
        <span class="emoji" *ngIf="isPublishing">⏳</span>
        {{ isPublishing ? "Publishing..." : t("addToAppStore") }}
      </button>
    </div>
  </div>
</div>
